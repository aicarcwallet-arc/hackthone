<!DOCTYPE html>
<html>
<head>
    <title>Deploy TreasuryAutoFill</title>
</head>
<body>
    <h1>Deploy TreasuryAutoFill Contract</h1>
    <button onclick="deploy()">Deploy Now</button>
    <div id="status"></div>

    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    <script>
        const TREASURY = "0x43909CCE967BE2A4448336a0aD95a99b7040BF05";
        const MOCK_USDC = "0x3600000000000000000000000000000000000000";

        const BYTECODE = "0x60806040523480156200001157600080fd5b5060405162001a3838038062001a388339818101604052810190620000379190620001c3565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620000a9576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620000a0906200027a565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036200011b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040162000112906200030c565b60405180910390fd5b81600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555033600060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508073ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050506200032e565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006200026b8262000240565b9050919050565b6200027d816200025e565b81146200028957600080fd5b50565b6000815190506200029d8162000272565b92915050565b60008060408385031215620002bd57620002bc6200023b565b5b6000620002cd858286016200028c565b9250506020620002e0858286016200028c565b9150509250929050565b600082825260208201905092915050565b7f496e76616c6964205553444320616464726573730000000000000000000000600082015250565b600062000333601483620002ea565b91506200034082620002fb565b602082019050919050565b60006020820190508181036000830152620003668162000324565b9050919050565b7f496e76616c6964207472656173757279206164647265737300000000000000600082015250565b6000620003a5601883620002ea565b9150620003b2826200036d565b602082019050919050565b60006020820190508181036000830152620003d88162000396565b9050919050565b6116fa80620003ee6000396000f3fe608060405234801561001057600080fd5b50600436106100cf5760003560e01c80638da5cb5b1161008c578063dc01f2b611610066578063dc01f2b614610184578063e941fa7814610190578063f2fde38b146101ae578063f3fef3a3146101ca576100cf565b80638da5cb5b14610142578063b0f479a114610160578063d26898741461017e576100cf565b80632f2c9ecd146100d45780633ccfd60b146100f057806361d027b3146100fa57806368fb5c11146101185780636c92ca43146101345780638a9e0b851461013e575b600080fd5b6100ee60048036038101906100e99190610ee5565b6101e6565b005b6100f86102db565b005b6101026103d1565b60405161010f9190610f2e565b60405180910390f35b6101206103f7565b60405161012b9190610f2e565b60405180910390f35b61013c61041d565b005b610146610584565b6040516101539190610f58565b60405180910390f35b610168610594565b6040516101759190610f58565b60405180910390f35b6101866105aa565b6040516101939190610f58565b60405180910390f35b6101986105b8565b6040516101a59190610f8e565b60405180910390f35b6101c860048036038101906101c39190610ee5565b6105c8565b005b6101e460048036038101906101df9190610fdf565b6106cc565b005b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610274576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161026b90611077565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036102e3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102da906110e3565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905080600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167fdae8cd19dfb5fa5dc6991c651933d402bca4c1a89fcb0a65e6d4c56b7fcec2e060405160405180910390a35050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610369576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161036090611077565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff16ff5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600080600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166040518263ffffffff1660e01b81526004016104949190610f2e565b602060405180830381865afa1580156104b1573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104d59190611118565b9050633b9aca008110156105795760006104ee3061059c565b9050633d09000081101561053b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161053290611191565b60405180910390fd5b61056e600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16633d0900006107f1565b600194505050505090565b600091505090565b600080fd5b600061059c3061059c565b9050919050565b600061059c61059c61059c565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016106149190610f2e565b602060405180830381865afa158015610631573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106559190611118565b905090565b600061066461059c565b9050919050565b600080600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016106c89190610f2e565b602060405180830381865afa1580156106e5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107099190611118565b9050633b9aca0081101561071d5760009150610725565b633d0900009150505b919050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146107b8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107af90611077565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603610827576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161081e906110e3565b60405180910390fd5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905080600060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610946576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161093d90611077565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036109d85760008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f193505050501580156109e2573d6000803e3d6000fd5b50610a2a565b8173ffffffffffffffffffffffffffffffffffffffff1663a9059cbb60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff16836040518363ffffffff1660e01b8152600401610a339291906111b1565b6020604051808303816000875af1158015610a52573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a769190611206565b505b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f884edad9ce6fa2440d8a54cc123490eb96d2768479d49ff9c7366125a94243648460405160405180910390a35050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610b2882610afd565b9050919050565b610b3881610b1d565b8114610b4357600080fd5b50565b600081359050610b5581610b2f565b92915050565b600060208284031215610b7157610b70610af8565b5b6000610b7f84828501610b46565b91505092915050565b610b9181610b1d565b82525050565b6000602082019050610bac6000830184610b88565b92915050565b6000819050919050565b610bc581610bb2565b82525050565b6000602082019050610be06000830184610bbc565b92915050565b60008115159050919050565b610bfb81610be6565b82525050565b6000602082019050610c166000830184610bf2565b92915050565b600081519050919050565b600082825260208201905092915050565b6000610c4382610c1c565b610c4d8185610c27565b9350610c5d818560208601610c72565b610c6681610ca5565b840191505092915050565b60005b83811015610c8f578082015181840152602081019050610c74565b83811115610c9e576000848401525b5050505050565b6000601f19601f8301169050919050565b60006020820190508181036000830152610cd08184610c38565b905092915050565b610ce181610bb2565b8114610cec57600080fd5b50565b600081359050610cfe81610cd8565b92915050565b600060208284031215610d1a57610d19610af8565b5b6000610d2884828501610cef565b91505092915050565b6000610d3c82610afd565b9050919050565b610d4c81610d31565b8114610d5757600080fd5b50565b600081359050610d6981610d43565b92915050565b60008060408385031215610d8657610d85610af8565b5b6000610d9485828601610d5a565b9250506020610da585828601610cef565b9150509250929050565b7f4e6f74206f776e657200000000000000000000000000000000000000000000600082015250565b6000610de5600983610c27565b9150610df082610daf565b602082019050919050565b60006020820190508181036000830152610e1481610dd8565b9050919050565b7f496e76616c696420616464726573730000000000000000000000000000000000600082015250565b6000610e51600f83610c27565b9150610e5c82610e1b565b602082019050919050565b60006020820190508181036000830152610e8081610e44565b9050919050565b7f496e73756666696369656e7420636f6e747261637420";

        async function deploy() {
            const status = document.getElementById("status");
            
            if (!window.ethereum) {
                status.innerHTML = "❌ MetaMask not found!";
                return;
            }

            try {
                status.innerHTML = "Requesting account...";
                await window.ethereum.request({ method: 'eth_requestAccounts' });
                
                const provider = new ethers.providers.Web3Provider(window.ethereum);
                const signer = provider.getSigner();
                
                status.innerHTML = "Deploying contract...";
                
                const factory = new ethers.ContractFactory(
                    [], // We'll use bytecode only
                    BYTECODE,
                    signer
                );
                
                const contract = await factory.deploy(MOCK_USDC, TREASURY, {
                    gasLimit: 2000000 // Manual gas limit
                });
                
                status.innerHTML = "Waiting for confirmation...";
                await contract.deployed();
                
                status.innerHTML = `✅ Deployed at: ${contract.address}`;
                
            } catch (error) {
                status.innerHTML = `❌ Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>
